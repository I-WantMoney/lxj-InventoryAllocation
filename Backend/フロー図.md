以下は、各モジュールのフロー図です。

1. main.py (API):
```mermaid
graph TD
    A[Receive Request] --> B{Validate Request}
    B --> |Valid| C[Process Request]
    B --> |Invalid| D[Return Error Response]
    C --> E{Endpoint}
    E --> |/orders| F[Create Order]
    E --> |/inventories| G[Create Inventory]
    E --> |/allocate| H[Allocate Inventory]
    E --> |/orders GET| I[Get Orders]
    E --> |/inventories GET| J[Get Inventories]
    E --> |/allocation-results GET| K[Get Allocation Results]
    F --> L[Return Response]
    G --> L
    H --> L
    I --> L
    J --> L
    K --> L
```

2. allocation.py:
```mermaid
graph TD
    A[Receive Allocation Request] --> B[Get Orders and Inventories]
    B --> C{Allocation Method}
    C --> |FIFO| D[Perform FIFO Allocation]
    C --> |LIFO| E[Perform LIFO Allocation]
    C --> |Average| F[Perform Average Allocation]
    C --> |Specific| G[Perform Specific Allocation]
    C --> |Total Average| H[Perform Total Average Allocation]
    C --> |Moving Average| I[Perform Moving Average Allocation]
    D --> J[Create Allocation Results]
    E --> J
    F --> J
    G --> J
    H --> J
    I --> J
    J --> K[Save Allocation Results]
    K --> L[Return Allocation Results]
```

3. models.py:
```mermaid
graph TD
    A[Define Order Model] --> B[Define Inventory Model]
    B --> C[Define Allocation Result Model]
```

4. database.py:
```mermaid
graph TD
    A[Create Database Connection] --> B[Create Database Session]
    B --> C[Define CRUD Operations]
    C --> |Create| D[Insert Record]
    C --> |Read| E[Query Records]
    C --> |Update| F[Update Record]
    C --> |Delete| G[Delete Record]
```

5. schemas.py:
```mermaid
graph TD
    A[Define Order Schema] --> B[Define Inventory Schema]
    B --> C[Define Allocation Request Schema]
    C --> D[Define Allocation Result Schema]
```

これらのフロー図は、各モジュールの主要な処理の流れを示しています。

1. `main.py`は、受信したリクエストを検証し、エンドポイントに基づいて適切な処理を行います。各エンドポイントは、対応するデータの作成、取得、または在庫引当を行います。

2. `allocation.py`は、在庫引当のリクエストを受信し、指定された引当方法に基づいて在庫の引当を行います。引当結果を作成し、データベースに保存します。

3. `models.py`は、データベースのテーブルに対応するデータモデルを定義します。

4. `database.py`は、データベース接続とセッション管理を行います。CRUD操作（作成、読取、更新、削除）を定義します。

5. `schemas.py`は、APIのリクエストとレスポンスのデータ構造を定義します。

これらのフロー図は、各モジュールの主要な処理の流れを示していますが、実際のコードではさらに詳細な実装やエラーハンドリングが含まれる場合があります。